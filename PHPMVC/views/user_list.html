<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>User List</title>
	<link rel="stylesheet" href="css/external.css">
	<script src="js/external.js"></script>
</head>
<body>

	<h1>User List</h1>

	<form action="../controllers/UserList.php" method="get" onsubmit="verifyAndSend(this); return false;">

		<label for="fname">First Name:</label>
		<input type="text" id="fname" name="fname">
		<span class="error" id="fnameErr">hello</span>

		<br><br>

		<input type="submit" name="submit" value="Search">
		
	</form>

	<p id="records"></p>

	<script>
		function verifyAndSend(pForm) {
			let fname = pForm.fname.value;
			let requestURL = pForm.action;

			document.getElementById("fnameErr").innerHTML = "";
			
			if (fname === "") {
				document.getElementById("fnameErr").innerHTML = "Blank!!";
			}
			else {
				let xhttp = new XMLHttpRequest();
				xhttp.onload = function() {
  					document.getElementById('records').innerHTML = this.responseText;
				}

				xhttp.open("GET", requestURL + "?firstname=" + fname);
				xhttp.send();
			}
		}
	</script>

</body>
</html>